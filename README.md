# YOLO检测识别系统

基于YOLOv8的智能检测识别系统，支持图片、视频和实时摄像头检测，具备目标跟踪、计数统计和智能预警功能。

## 新增功能

### 🚨 实时预警系统
- **新ID预警**: 摄像头检测时，每次出现新的跟踪ID时自动触发预警
- **预警帧保存**: 自动捕获并保存触发预警的关键帧
- **预警历史**: 在检测结果栏实时显示预警信息，可查看详情和下载预警帧
- **预警通知**: 桌面通知提醒新目标出现

## 功能特性

### 🎯 检测模式
- **图片检测**: 支持JPG、PNG、GIF等格式
- **图片分割**: 精确的目标轮廓分割和彩色掩码显示
- **视频检测**: 支持MP4、AVI、MOV等视频格式
- **视频分割**: 逐帧分割处理，生成带分割掩码的视频

### 📊 智能分析
- **目标跟踪**: 基于深度学习的多目标跟踪算法
- **计数统计**: 累积计数和实时屏幕内目标数量统计
- **类别统计**: 按目标类别分类统计，支持图表可视化
- **预警系统**: 新目标检测预警，支持音频和视觉提醒

### ⚙️ 个性化设置
- **分割参数**: 掩码透明度、置信度阈值、IoU阈值可调节
- **跟踪设置**: 可开关目标跟踪、计数统计和预警功能
- **预警配置**: 提示音开关、音量调节、测试功能
- **模型管理**: 支持多种YOLO模型加载和切换

## 快速开始

### 环境要求
- Python 3.8+
- Node.js 16+
- 摄像头设备（用于实时检测）

### 安装依赖

#### 后端依赖
```bash
pip install -r requirements.txt
```

#### 前端依赖
```bash
cd frontend
npm install
```

### 启动服务

#### 启动后端服务
```bash
python app.py
```
后端服务将在 http://localhost:5000 启动

#### 启动前端服务
```bash
cd frontend
npm run dev
```
前端服务将在 http://localhost:8080 启动

### 默认账号
- 用户名: `admin`
- 密码: `admin123`

## 使用指南

### 预警功能使用步骤

1. **启用跟踪**: 在"跟踪和计数设置"中开启"启用跟踪"
2. **启用预警**: 开启"启用预警"开关
3. **配置提示音**: 
   - 开启"预警提示音"
   - 调节音量（0-100%）
   - 点击"测试音效"验证设置
4. **启动摄像头**: 点击"启动摄像头"开始实时检测
5. **预警触发**: 当检测到新的跟踪ID时：
   - 自动播放提示音
   - 显示桌面通知
   - 在检测结果栏显示预警信息
   - 保存预警帧到服务器

### 预警信息查看

在检测结果栏的"实时预警"区域可以：
- 查看最近的预警记录
- 点击预警帧查看详情
- 下载预警帧图片
- 展开查看更多历史预警

## 技术架构

### 后端技术栈
- **Flask**: Web框架
- **YOLOv8**: 目标检测和分割
- **OpenCV**: 图像处理
- **SQLite**: 数据存储
- **目标跟踪算法**: 基于中心点距离的多目标跟踪

### 前端技术栈
- **Vue 3**: 前端框架
- **Element Plus**: UI组件库
- **WebRTC**: 实时视频流
- **Web Audio API**: 音频处理
- **Canvas API**: 图像处理

### 预警系统特性
- **实时性**: 毫秒级预警响应
- **准确性**: 基于跟踪ID的精确预警
- **可配置**: 完全可自定义的预警设置
- **多媒体**: 音频+视觉+通知的多重提醒
- **历史记录**: 完整的预警历史和帧保存

## 模型支持

### 检测模型
- YOLOv8n, YOLOv8s, YOLOv8m, YOLOv8l, YOLOv8x
- 自定义训练模型（.pt格式）

### 分割模型
- YOLOv8n-seg, YOLOv8s-seg, YOLOv8m-seg, YOLOv8l-seg, YOLOv8x-seg
- 支持实例分割和语义分割

## API接口

### 预警相关接口
- `POST /api/process_frame`: 处理摄像头帧，返回预警信息
- `GET /api/alerts/<user_id>`: 获取用户预警记录
- `POST /api/alerts/mark_handled`: 标记预警为已处理
- `DELETE /api/alerts/delete`: 删除预警记录
- `GET /api/alerts/stats/<user_id>`: 获取预警统计信息

## 注意事项

1. **浏览器权限**: 使用摄像头和音频功能需要浏览器权限
2. **模型下载**: 首次使用时会自动下载YOLO模型
3. **性能优化**: 推荐使用GPU加速以获得更好的实时性能
4. **存储空间**: 预警帧会保存到`static/alerts/`目录，注意磁盘空间
5. **音频支持**: 预警音效使用Web Audio API生成，支持现代浏览器

## 更新日志

### v1.1.0 (2024-01-XX)
- ✨ 新增实时预警系统
- ✨ 新增预警音效和通知功能
- ✨ 新增预警帧捕获和保存
- ✨ 新增预警历史查看功能
- 🎨 优化用户界面和交互体验
- 🔧 改进跟踪算法稳定性

### v1.0.0
- 🎉 基础检测和分割功能
- 📊 目标跟踪和计数统计
- 🎥 实时摄像头检测
- 📱 响应式Web界面

## 许可证

MIT License

## 贡献

欢迎提交Issue和Pull Request！

## 支持

如有问题，请联系开发团队或提交Issue。



